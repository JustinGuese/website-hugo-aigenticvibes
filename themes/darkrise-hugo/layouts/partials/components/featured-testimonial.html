{{ $featuredCustomer := .FeaturedCustomer }}
{{ $alternateLayout := .alternateLayout }}
{{ $list := .list }}
{{ $featuredTestimonial := slice }}
{{ $remainingList := slice }}

{{ if $featuredCustomer }}
  {{ range $list }}
    {{ if eq .customer.name $featuredCustomer }}
      {{ $featuredTestimonial = $featuredTestimonial | append . }}
    {{ else }}
      {{ $remainingList = $remainingList | append . }}
    {{ end }}
  {{ end }}
{{ else }}
  {{ $remainingList = $list }}
{{ end }}

{{ with index $featuredTestimonial 0 }}
  <div class="col-12 pt-20" data-aos="fade-up-sm" data-aos-delay="200">
    <div
      class="relative rounded-lg border border-border bg-dark/50 p-5 max-lg:mb-10 max-lg:last:mb-0 md:p-10">
      <div class="row gy-4 items-center">
        <div class="lg:col-5">
          <div
            class="relative overflow-hidden rounded-lg bg-dark lg:me-8 transition-transform duration-300 hover:scale-105">
            {{ partial "image" (dict "Src" .customer.avatar "Alt" "customer name" ) }}

            {{ if $alternateLayout }}
              <div
                class="absolute bottom-0 left-0 w-full bg-linear-to-t from-black/50 to-transparent p-8">
                <h4 class="tracking-none mb-2 mt-6 text-lg font-bold">
                  {{ .customer.name }}
                </h4>

                <p class="text-sm opacity-70">{{ .customer.designation }}</p>
              </div>
            {{ end }}

          </div>
        </div>
        <div class="lg:col-7" data-aos="fade-up-sm">
          {{ $classes := "min-h-full rounded-s-3xl" }}
          {{ if not .alternateLayout }}
            {{ $classes = print $classes " py-8 lg:pb-0 lg:pt-8" }}
          {{ end }}
          <div class="{{ $classes }}">
            {{ if not $alternateLayout }}
              <h3 class="tracking-none h5 mb-6 font-bold">{{ .title }}</h3>
            {{ end }}
            <p
              class="{{ if $alternateLayout }}
                h4 tracking-none opacity-80
              {{ else }}
                opacity-70 text-lg/[170%]
              {{ end }}">
              {{ .content | markdownify }}
            </p>
            {{ if not $alternateLayout }}
              <h4 class="tracking-none mb-2 mt-6 text-lg font-bold">
                {{ .customer.name }}
              </h4>
              <p class="text-sm opacity-70">{{ .customer.designation }}</p>
            {{ end }}

          </div>

          <ul
            class="mt-5 flex flex-col gap-x-10 gap-y-4 border-t border-border pt-5 md:flex-row md:pt-10 lg:mt-10">
            {{ range .list }}
              <li>
                <strong class="h2 has-gradient">{{ .title }}</strong>

                <p class="opacity-70">{{ .description }}</p>
              </li>
            {{ end }}

          </ul>
          {{ if not $alternateLayout }}
            <div
              aria-hidden="true"
              class="rotate-animation pointer-events-none absolute left-3/4 top-0 -z-10 h-80 w-[550px] -translate-x-1/2 rounded-full from-secondary via-secondary/80 via-60% to-dark/0 opacity-30 blur-[120px] bg-linear-[260deg]"></div>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
{{ end }}
