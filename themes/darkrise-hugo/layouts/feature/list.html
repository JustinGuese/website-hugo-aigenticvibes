{{ define "main" }}
  {{/* Start Features Grid section */}}
  {{ with .Params.features_grid }}
    <section class="section">
      <div class="container">
        <div class="row">
          <div
            class="mx-auto text-center lg:col-9 xl:col-7"
            data-aos="fade-up-sm">
            <h1 class="has-gradient mb-6">{{ .title }}</h1>

            <p class="text-lg/[inherit] opacity-80">{{ .description }}</p>
          </div>
          <div class="col-12 pt-20">
            <div class="row gx-4 gy-5">
              {{ range $index, $item := .list }}
                <div
                  class="lg:col-4"
                  data-aos="fade-up-sm"
                  data-aos-delay="{{ $index }}00">
                  <div
                    class="flex min-h-full justify-between overflow-hidden rounded-lg border border-border bg-dark {{ cond (eq $index 0) "flex-col-reverse p-8" (cond (eq $index 1) "pt-8 px-8 flex-col" (cond (eq $index 2) "flex-col pl-8 pt-8"  "flex-col p-8")) }}
                    ">
                    <div class="{{ if eq $index 2 }}pe-8{{ end }}">
                      {{ if $item.title }}
                        <h3 class="h6 tracking-none mb-4 font-semibold">
                          {{ $item.title | markdownify }}
                        </h3>
                      {{ end }}
                      {{ if $item.description }}
                        <p class="mb-auto opacity-70">
                          {{ $item.description | markdownify }}
                        </p>
                      {{ end }}
                    </div>
                    {{ if and (eq $index 0) $item.images }}
                      <div
                        class="mb-20 lg:mb-36 flex items-center justify-center gap-10">
                        {{ range $i, $image := $item.images }}
                          {{ $imageString := (string $image) }}
                          {{ partial "image" (dict "Src" $imageString "Alt" "user image" "Class" (cond (eq $i 1) "w-24 md:w-36" "w-16 md:w-28")) }}
                        {{ end }}
                      </div>
                    {{ else if and (eq $index 1) $item.images }}
                      <div
                        class="relative lg:-mb-8 w-full max-w-[420px] mt-40 mx-auto">
                        {{ range $i, $image :=  $item.images }}

                          {{ $imageString := (string $image) }}
                          {{ partial "image" (dict "Src" $imageString "Alt" "feature" "Class"
                            (cond (eq $i 0) "absolute inset-x-0 mx-auto block bottom-[10%] z-0 w-[80%]"
                            "absolute inset-x-0 mx-auto block bottom-[-5%] z-10 w-[90%]"))
                          }}
                        {{ end }}
                        {{ $lastImage := (index $item.images 2) }}
                        {{ partial "image" (dict "Src" (string $lastImage) "Alt" "user image" "Class" "relative z-30 w-full") }}
                      </div>
                    {{ else if eq $index 2 }}
                      <div class="relative w-full max-w-[420px] mt-10 mx-auto">
                        {{ if $item.tools_bg }}
                          {{ partial "image" (dict "Src" (string $item.tools_bg) "Alt" "user image" "Class" "relative z-0 w-full pl-4") }}
                        {{ end }}
                        {{ if $item.tools }}
                          {{ range $i, $tool := $item.tools }}
                            {{ $toolString := (string $tool) }}
                            {{ $classes := (index (slice
                              "left-0 top-7 w-[calc(1vw_+_35px)]"
                              "left-[33%] top-7 w-[calc(1vw_+_35px)]"
                              "right-[20%] top-3 opacity-70 w-[calc(1vw_+_40px)]"
                              "left-[22%] top-[40%] w-[calc(1vw_+_35px)]"
                              "left-[46%] top-[40%] w-[calc(1vw_+_35px)] opacity-50"
                              "left-[76%] top-[46%] w-[calc(1vw_+_35px)]"
                              "left-[22%] top-[78%] w-[calc(1vw_+_35px)]"
                              "left-[56%] top-[70%] w-[calc(1vw_+_35px)]") $i)
                            }}
                            <div class="absolute z-10 {{ $classes }}">
                              {{ partial "image" (dict "Src" $toolString "Alt" "user image" "Class" "w-full h-full") }}
                            </div>
                          {{ end }}
                        {{ end }}
                      </div>
                    {{ end }}

                  </div>
                </div>
              {{ end }}
            </div>
          </div>
        </div>
      </div>
    </section>
  {{ end }}
  {{/* End Features Grid section */}}

  {{/* features Layout */}}
  {{ partial "components/features-sticky-layout" (dict "Class" "mb-14") }}

  {{/* Testimonial card */}}
  <section class="section pt-0">
    <div class="container">
      {{/* Featured Testimonial */}}
      {{ with site.GetPage "sections/testimonial" }}
        {{ partial "components/featured-testimonial" (dict "FeaturedCustomer" "David Miller"  "alternateLayout" true "list" .Params.list) }}
      {{ end }}
    </div>
  </section>

  {{/* call to action 2 */}}
  {{ partial "call-to-action-2" }}
{{ end }}
